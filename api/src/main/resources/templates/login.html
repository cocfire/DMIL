<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="shortcut icon" th:href="@{static/icon/NETWORK_LAN.png}"><!-- 自定义页签图标 -->

    <title>设备中间层平台-登录</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" th:href="@{static/css/bootstrap.min.css}">
    <!-- Bootstrap theme -->
    <link rel="stylesheet" th:href="@{static/css/bootstrap-theme.min.css}" >
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="theme.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="http://cdn.bootcss.com/html5shiv/3.7.0/html5shiv.min.js"></script>
    <script src="http://cdn.bootcss.com/respond.js/1.3.0/respond.min.js"></script>
    <script th:src="@{static/js/jquery.min.js}"></script>
    <script th:src="@{static/js/jquery.cookie.js}"></script>
    <script th:src="@{static/js/bootstrap.min.js}"></script>
    <script th:src="@{static/js/jquery.form.js}"></script>
    <script th:src="@{static/js/jquery.enplaceholder.js}"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('input').placeholder();
        });
    </script>
    <style type="text/css">
        @media (min-width: 1200px){
            .container {
                width: 970px;

            }

            .btn-info {
                color: #fff;
                background-color: #4d6ea6;
                border-color: #4d6ea6
            }

            .btn-info:hover {
                background: url('../static/images/login_submit_hover.png') repeat-x;
            }

            .btn-info.active, .btn-info.focus, .btn-info:active, .btn-info:focus, .btn-info:hover, .open > .dropdown-toggle.btn-info {
                color: #fff;
                background-color: #46669f;
                border-color: #46669f
            }
        }
    </style>
</head>
<body>
    <img id="bg" th:src="@{static/images/bg.jpg}" style="right: 0; bottom: 0;position: absolute; top: 0; left: 0; z-index: -1"/>
    <div id="version" style="position:absolute; width: 100px;">version:1.1.0 build-20200505</div>
    <div id="login" style="overflow:visible;">
        <div class="container"
             style="width: 420px;height: 370px; background-image: url('../static/images/login_modal.png');background-repeat: no-repeat;padding-right:0px;margin-left: 1300px;padding-left: 10px;">
            <div class="container"
                 style=" width: 420px;height: 51px; background-image: url('../static/images/login_title.png');background-repeat: no-repeat;padding-right:0px;margin-left: 0px;padding-left: 0px;margin-top: 5px;">
                <!-- 账号密码登录 -->
                <div id="type1" class="container" style="width: 400px;height:50px;padding-left: 0px;padding-right: 0px;margin-top: 70px;margin-left: 0px;">

                    <form commandName="user" cssClass="form-horizontal " role="form" method="post"
                          th:action="@{dologin}" onsubmit="return validator(this)">
                        <div class="container" style="width: 353px;height: 51px; padding-right:0px;">
                        <span class="input-group-addon"
                              style="line-height:45px;height: 24px; background-image: url('../static/images/login_username.png');background-repeat: no-repeat;vertical-align: middle;display: inline; border: none;background-color: transparent;"></span>
                            <span style="font-size: 23px;margin-left: 10px;color: #0da2f6">|</span>
                            <input path="phone" placeholder="帐号" tabindex="1"
                                        cssStyle="background-color: transparent;border: none;height: 51px;padding:6px 12px;top: 0px;position: relative;width: 82%;"/>
                        </div>
                        <div class="container" style="width: 353px;height: 51px; margin-top: 10px; padding-right:0px;">
                            <span class="input-group-addon"
                                  style="line-height:45px;height: 24px; background-image: url('../static/images/login_pwd.png');background-repeat: no-repeat;vertical-align: middle;display: inline; border: none;background-color: transparent;"></span>
                            <span style="font-size: 23px;margin-left: 10px;color: #0da2f6">|</span>
                            <password path="pwd" placeholder="输入密码" tabindex="2"
                                           cssStyle="background-color: transparent;border: none;height: 51px;padding:6px 12px;top: 0px;position: relative;position: relative;width: 82%;"/>
                        </div>

                        <div class="container" style="width: 353px;margin-top: 20px;padding-left: 0px;padding-right:0px;">
                            <button id="savebtn" name="savebtn" type="submit" class="btn btn-info btn-lg "
                                    style="width: 100%;color: white;font-family: 微软雅黑;font-size: 20px;background-image: url('../static/images/login_submit.png');background-repeat: no-repeat;">
                                登录
                            </button>
                        </div>
                        <div>
                            <h5 style="width: 353px;margin-top: 20px;padding-left: 40px;font-size:12px;color:#808080">
                                温馨提示：建议使用谷歌、火狐等浏览器,IE9及以上版本</h5>
                        </div>
                    </form>
                </div>
            </div>
        </div> <!-- /container -->
    </div>
</body>
<script type="text/javascript">
    var login = document.getElementById("login");
    var bgImg = document.getElementById("bg");
    var version = document.getElementById("version");
    login.style.position = "absolute";

    window.onload = view; 	// 页面初始化时固定其位置
    window.onscroll = view;// 当文档位置发生变化时重新固定其位置
    window.onresize = view;//页面重置时固定其位置
    function view() {      // 元素位置固定函数
        //登录
        login.style.right = parseInt(document.documentElement.clientWidth) * 0.08 + "px";
        login.style.top = parseInt(document.documentElement.clientHeight) * 0.3 + "px";
        //背景
        bgImg.style.width = parseInt(document.documentElement.clientWidth) + "px";
        bgImg.style.height = parseInt(document.documentElement.clientHeight) + "px";
        //版本号
        version.style.right = "0px";
        version.style.top = parseInt(document.documentElement.clientHeight) * 0.015 + "px";
    }

    //账号密码登录验证
    function validator() {
        if ($("#pwd").val().length == 0) {
            alert("请输入密码");
            $("#pwd").focus();

            return false;
        }
        if ($("#securitycode").val().length == 0) {
            alert("请输入验证码");
            $("#securitycode").focus();

            return false;
        }

        return true;
    }

    $(document).ready(function () {
        var loginResults = [
            true,
            "您输入的验证码不对，请重新输入。",
            "用户名或密码错误",
            "验证码已失效或还未获取验证码，请重新输入。",
            "此用户已经被停用，不能够登录系统",
            "您的密码是原始密码，登录后请修改密码",
            "首次登录请使用短信快捷登录",
            "您还未绑定微信，请使用账号密码或手机短信登录后，在首页右上角点击当前用户绑定。",
            "请重新扫码登录",
            "微信登录异常,请联系系统管理员"];
        var loginResult = "${empty loginResult ? param.loginResult : loginResult}";

        $("#phone").focus();

        if (loginResult != ""
            && parseInt(loginResult) != NaN) {
            if (loginResults[parseInt(loginResult)] == true) {
                location.href = "${ctx}/";
            } else if (typeof loginResults[parseInt(loginResult)] == "string") {
                alert(loginResults[parseInt(loginResult)]);
            }
        }
    });
</script>
</html>